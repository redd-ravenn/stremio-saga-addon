# stremio-saga-addon

## Features

- Sorts and displays content by release date within a TMDB movie collection.
- Navigate directly between content items in Stremio.
- Optionally displays ratings & vote counts ; the tagline/slogan of the content.
- 6 month Redis cache (maximum duration to comply with TMDB TOS) to enhance performance and reduce TMDB API calls, updating as soon as a new item is added to a cached collection.
- Adheres to TMDB API rate limits (45 requests per second).
  
![Screenshot of an example of the addon's output on Stremio](https://i.imgur.com/o22Qdmo.png)

## Prerequisites

- **TMDB API Key**: You need to obtain a TMDB API key. You can get one [here](https://www.themoviedb.org/settings/api).

## Installation (with Docker)

```yaml
services:
  stremio-saga-addon:
    build: .
    ports:
      # Map port 8080 on the host to port 7000 in the container
      - "8080:7000"
    environment:
      # Port on which the Express server listens
      # Default is 7000 if not specified
      PORT: 7000

      # Indicates whether rate limiting is enabled
      # Default is true, even if not specified here
      RATE_LIMIT_ENABLED: true

      # Indicates whether logging is enabled
      # Default is false, even if not specified here
      LOG_ENABLED: true

      # Level of detail for logs
      # Possible values are: info, debug
      # Default is 'info' if not specified; 'debug' provides more detailed logs
      LOG_LEVEL: info

      # TMDB API key for accessing TMDB services
      # Required for API access. No default value; should be defined in the environment to enable public instance
      TMDB_API_KEY:

      # Indicates the environment mode in which the application is running
      # Possible values are: development, production
      # Default is 'development' if not specified
      NODE_ENV: production

      # Determines the duration for which log files will be retained 
      # The value can be expressed in days (d), weeks (w), or months (M)
      # For example, '3d' means that log files will be kept for 3 days before being deleted
      LOG_INTERVAL_DELETION: 3d

      # Redis credentials
      # Optional but required for caching
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_PASSWORD: redis_password
    depends_on:
      redis:
        condition: service_healthy

  redis:
    image: redis:alpine
    command: redis-server --requirepass ${REDIS_PASSWORD:-redis_password}
    ports:
      - "6379:6379"
    volumes:
      - ./redis:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 5s
      timeout: 5s
      retries: 5
```

## Installation (without Docker)

1. **Obtain the TMDB API Key**: Visit [TMDB API Settings](https://www.themoviedb.org/settings/api) to get your API key.
2. **Clone the repository**: Clone this repository to your local machine.

    ```bash
    git clone https://github.com/reddravenn/stremio-saga-addon.git
    ```

3. **Install dependencies**:

    ```bash
    cd stremio-saga-addon
    npm install
    ```

4. **Start the application**:

    ```bash
    npm start
    ```

5. **Configure the addon**: Access the addon configuration interface via the link generated by the application.

## Contributing

Contributions are welcome! Please submit an [issue](https://github.com/reddravenn/stremio-saga-addon/issues) or a [pull request](https://github.com/reddravenn/stremio-saga-addon/pulls) if you have suggestions or fixes.

## License

Distributed under the MIT License. See the [LICENSE](LICENSE) file for more information.
